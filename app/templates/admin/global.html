{% extends "base/base.html" %}

{% block title %} Settings {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <div class="row">
        <div class="col-12 col-xl-8">
            <div class="card card-body border-0 shadow mb-4">
                <h2 class="h5 mb-4">全局参数</h2>
                <form method="post">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div>
                                <label for="start_number">激励触发数量</label>
                                <input class="form-control" id="start_number" name="start_number" type="text" value="{{data['start_number']}}" required>
                            </div>
                        </div>
                    </div>
                    <div class="row align-items-center">
                        <div class="col-md-6 mb-3">
                            <label for="start_time">激励计算起始时间</label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <svg class="icon icon-xs" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                                </span>
                                <input data-datepicker="" class="form-control" id="start_time" name="start_time" type="text" value="{{data['start_time']}}" required>
                              </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button class="btn btn-gray-800 mt-2 animate-up-2" type="button" onclick="submit_global()">Save all</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script src="{{ config.ASSETS_ROOT }}/js/jquery.min.js"></script>
<script type="text/javascript">
    function submit_global() {
        var start_number = document.getElementById('start_number').value;
        var start_time = document.getElementById('start_time').value;
                var data = {};
                data['start_number'] = start_number;
                data['start_time'] = start_time;
                $.ajax({
                    url: '{{ url_for('admin.global') }}',
                    type: 'POST',
                    data: JSON.stringify(data),
                    contentType: 'application/json; charset=UTF-8',
                    processData: false,
                    success: function (result) {
                            location.href = '{{ url_for('admin.global') }}';

                    }
                });
    }
</script>
{% endblock javascripts %}
